# Tree Component

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –≤–∏–¥–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é —Ñ–∞–π–ª–æ–≤–æ–≥–æ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø–∞–ø–æ–∫ –ø–æ –∫–ª–∏–∫—É
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫
- ‚úÖ –û—Ç—Å—Ç—É–ø—ã –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º
- ‚úÖ –í—ã–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- ‚úÖ –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ CSS –º–æ–¥—É–ª–∏
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –ø–æ –ø—Ä–∞–≤–æ–º—É –∫–ª–∏–∫—É
- ‚úÖ Drag and drop —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Ñ–∞–π–ª–∞–º
- ‚úÖ –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –∏–∫–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—Å—ã
- ‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```tsx
import { Tree } from '@/shared/components/Tree';
```

## –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```tsx
import React from 'react';

import { Tree, TreeNodeType } from '@/shared/components/Tree';

const data: TreeNodeType[] = [
    {
        id: '1',
        name: 'src',
        type: 'folder',
        children: [
            {
                id: '2',
                name: 'components',
                type: 'folder',
                children: [
                    {
                        id: '3',
                        name: 'Button.tsx',
                        type: 'file',
                    },
                ],
            },
            {
                id: '4',
                name: 'utils.ts',
                type: 'file',
            },
        ],
    },
];

function App() {
    return (
        <Tree
            data={data}
            onNodeClick={(node) => console.log('Clicked:', node.name)}
            onNodeSelect={(node) => console.log('Selected:', node.name)}
        />
    );
}
```

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```tsx
import React, { useState } from 'react';

import {
    Tree,
    TreeContextMenuAction,
    TreeNodeType,
} from '@/shared/components/Tree';

function AdvancedTreeExample() {
    const [selectedNodeId, setSelectedNodeId] = useState<string>();
    const [expandedNodeIds, setExpandedNodeIds] = useState<string[]>(['1']);

    const data: TreeNodeType[] = [
        // ... –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
    ];

    const contextMenuActions: TreeContextMenuAction[] = [
        {
            id: 'open',
            label: '–û—Ç–∫—Ä—ã—Ç—å',
            icon: 'üìÇ',
            action: (node) => console.log('Opening:', node.name),
        },
        {
            id: 'rename',
            label: '–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å',
            icon: '‚úèÔ∏è',
            action: (node) => console.log('Renaming:', node.name),
        },
        {
            id: 'delete',
            label: '–£–¥–∞–ª–∏—Ç—å',
            icon: 'üóëÔ∏è',
            action: (node) => console.log('Deleting:', node.name),
        },
    ];

    const customIcons = {
        folder: 'üìÅ',
        folderOpen: 'üìÇ',
        file: 'üìÑ',
        js: 'üìú',
        ts: 'üìú',
        tsx: '‚öõÔ∏è',
        jsx: '‚öõÔ∏è',
    };

    return (
        <Tree
            data={data}
            selectedNodeId={selectedNodeId}
            expandedNodeIds={expandedNodeIds}
            contextMenuActions={contextMenuActions}
            customIcons={customIcons}
            enableDragDrop={true}
            enableVirtualization={true}
            enableSearch={true}
            maxVisibleItems={50}
            itemHeight={32}
            onNodeSelect={(node) => setSelectedNodeId(node.id)}
            onNodeExpand={(node) => {
                setExpandedNodeIds((prev) => [...prev, node.id]);
            }}
            onNodeCollapse={(node) => {
                setExpandedNodeIds((prev) =>
                    prev.filter((id) => id !== node.id)
                );
            }}
            onDragEnd={(dragNode, targetNode) => {
                console.log('Moved:', dragNode.name, 'to:', targetNode?.name);
            }}
        />
    );
}
```

## API

### TreeProps

| Prop                   | Type                                                  | Default | Description                 |
| ---------------------- | ----------------------------------------------------- | ------- | --------------------------- |
| `data`                 | `TreeNode[]`                                          | -       | –î–∞–Ω–Ω—ã–µ –¥–µ—Ä–µ–≤–∞               |
| `onNodeClick`          | `(node: TreeNode) => void`                            | -       | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ —É–∑–ª—É    |
| `onNodeDoubleClick`    | `(node: TreeNode) => void`                            | -       | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞   |
| `onNodeSelect`         | `(node: TreeNode) => void`                            | -       | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —É–∑–ª–∞      |
| `onNodeExpand`         | `(node: TreeNode) => void`                            | -       | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è   |
| `onNodeCollapse`       | `(node: TreeNode) => void`                            | -       | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è     |
| `onDragStart`          | `(node: TreeNode) => void`                            | -       | –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è       |
| `onDragEnd`            | `(dragNode: TreeNode, targetNode?: TreeNode) => void` | -       | –ö–æ–Ω–µ—Ü –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è        |
| `selectedNodeId`       | `string`                                              | -       | ID –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —É–∑–ª–∞          |
| `expandedNodeIds`      | `string[]`                                            | `[]`    | –ú–∞—Å—Å–∏–≤ ID —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö —É–∑–ª–æ–≤ |
| `searchQuery`          | `string`                                              | -       | –í–Ω–µ—à–Ω–∏–π –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å    |
| `contextMenuActions`   | `TreeContextMenuAction[]`                             | `[]`    | –î–µ–π—Å—Ç–≤–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é  |
| `customIcons`          | `TreeCustomIcons`                                     | -       | –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏–∫–æ–Ω–∫–∏            |
| `enableDragDrop`       | `boolean`                                             | `false` | –í–∫–ª—é—á–∏—Ç—å drag & drop        |
| `enableVirtualization` | `boolean`                                             | `false` | –í–∫–ª—é—á–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é      |
| `enableSearch`         | `boolean`                                             | `true`  | –í–∫–ª—é—á–∏—Ç—å –ø–æ–∏—Å–∫              |
| `maxVisibleItems`      | `number`                                              | `100`   | –ú–∞–∫—Å. –≤–∏–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤     |
| `itemHeight`           | `number`                                              | `28`    | –í—ã—Å–æ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö  |
| `className`            | `string`                                              | -       | CSS –∫–ª–∞—Å—Å                   |
| `style`                | `React.CSSProperties`                                 | -       | Inline —Å—Ç–∏–ª–∏                |

### TreeNode

```tsx
interface TreeNode {
    id: string;
    name: string;
    type: 'file' | 'folder';
    children?: TreeNode[];
    path?: string;
    size?: number;
    modified?: Date;
    icon?: string;
}
```

### TreeContextMenuAction

```tsx
interface TreeContextMenuAction {
    id: string;
    label: string;
    icon?: string;
    action: (node: TreeNode) => void;
    disabled?: boolean;
}
```

### TreeCustomIcons

```tsx
interface TreeCustomIcons {
    folder?: string;
    folderOpen?: string;
    file?: string;
    [key: string]: string | undefined;
}
```

## –•—É–∫–∏

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ö—É–∫–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:

### useExpandedNodes

```tsx
const {
    expandedIds,
    toggleNode,
    expandNode,
    collapseNode,
    expandAll,
    collapseAll,
    isExpanded,
} = useExpandedNodes(['initial-expanded-id']);
```

### useSelectedNode

```tsx
const { selectedId, selectNode, clearSelection, isSelected } = useSelectedNode(
    'initial-selected-id'
);
```

### useTreeSearch

```tsx
const { searchQuery, searchResults, performSearch, clearSearch, hasResults } =
    useTreeSearch(treeData);
```

## –£—Ç–∏–ª–∏—Ç—ã

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–∞–∫–∂–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–µ–∑–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã:

```tsx
import {
    findNodeById,
    formatDate,
    formatFileSize,
    getFileIcon,
    getNodePath,
    searchNodes,
    sortNodes,
} from '@/shared/components/Tree';
```

## –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CSS –º–æ–¥—É–ª–∏ –∏ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏:

```css
.tree {
    --text-primary: #333;
    --text-secondary: #666;
    --bg-primary: #fff;
    --bg-secondary: #f8f9fa;
    --border-color: #e0e0e0;
    --hover-bg: #f5f5f5;
    --selected-bg: #e3f2fd;
    --selected-text: #1976d2;
    --primary-color: #007bff;
}

/* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
.tree.dark {
    --text-primary: #e0e0e0;
    --text-secondary: #b0b0b0;
    --bg-primary: #1e1e1e;
    --bg-secondary: #2d2d2d;
    --border-color: #404040;
    --hover-bg: #333;
    --selected-bg: #264f78;
    --selected-text: #ffffff;
    --primary-color: #0078d4;
}
```

## –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

- `‚Üë/‚Üì` - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º
- `‚Üê/‚Üí` - –°–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø–∞–ø–æ–∫
- `Enter/Space` - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–ø–∫–∏
- `Escape` - –û—á–∏—Å—Ç–∫–∞ –≤—ã–±–æ—Ä–∞

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ (>100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ARIA –∞—Ç—Ä–∏–±—É—Ç—ã
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä–æ–≤
